# ะัะตะดัะบะฐะทะฐะฝะธะต ัะธัะบะฐ ัะตัะดะตัะฝะพะณะพ ะฟัะธัััะฟะฐ

ะะฝัะตะปะปะตะบััะฐะปัะฝัะน ัะตัะฒะธั ะดะปั ัะฐะฝะฝะตะณะพ ะฒััะฒะปะตะฝะธั ะฟะฐัะธะตะฝัะพะฒ ั ะฒััะพะบะธะผ ัะธัะบะพะผ ัะตัะดะตัะฝะพะณะพ ะฟัะธัััะฟะฐ.  
ะกะพะทะดะฐะฝ ั ัะพะบััะพะผ ะฝะฐ **ะบะปะธะฝะธัะตัะบัั ะฟัะธะผะตะฝะธะผะพััั**, **ะธะฝัะตัะฟัะตัะธััะตะผะพััั** ะธ **ะพัะฒะตัััะฒะตะฝะฝะพััั**.


## ะญัะฐะฟั ัะฐะทัะฐะฑะพัะบะธ

- **ะะปัะฑะพะบะธะน EDA ะฒ `risk_of_heart_attack.ipynb`**  
  ะะฝะฐะปะธะท ะดะฐะฝะฝัั, ะพะฑัะฐะฑะพัะบะฐ ัะธััะตะผะฐัะธัะตัะบะธั ะฟัะพะฟััะบะพะฒ, ะบะพะดะธัะพะฒะฐะฝะธะต ะฟัะธะทะฝะฐะบะฐ `Gender`, ะฒััะฒะปะตะฝะธะต ะฐะฝะพะผะฐะปะธะน (ะฝะฐะฟัะธะผะตั, ะฝะตะบะพััะตะบัะฝะพะต ะดะฐะฒะปะตะฝะธะต), ะพัะตะฝะบะฐ ะบะฐัะตััะฒะฐ ะฑะธะพะผะฐัะบะตัะพะฒ

- **ะัะฑะพั ะฟัะธะทะฝะฐะบะพะฒ ะธ ะพะฟัะธะผะธะทะฐัะธั ะฟะพะด ะผะตะดะธัะธะฝัะบะธะน ะบะพะฝัะตะบัั**  
  ะคะธะฝะฐะปัะฝะฐั ะผะพะดะตะปั ะธัะฟะพะปัะทัะตั **15 ะบะปะธะฝะธัะตัะบะธ ะทะฝะฐัะธะผัั ะฟัะธะทะฝะฐะบะพะฒ**, ะธัะบะปััะฐั ะดะธะฐะณะฝะพััะธัะตัะบะธะต ะผะฐัะบะตัั (`CK-MB`, `Troponin`), ะฝะตะดะพัััะฟะฝัะต ะดะพ ัะพะฑััะธั

- **ะะฐัััะพะนะบะฐ ะฟะพัะพะณะฐ ะฟัะธะฝััะธั ัะตัะตะฝะธั**  
  ะะพัะพะณ ะบะปะฐััะธัะธะบะฐัะธะธ **0.42** ะฒัะฑัะฐะฝ ะดะปั ะผะฐะบัะธะผะธะทะฐัะธะธ **Recall (ััะฒััะฒะธัะตะปัะฝะพััะธ)** - ะบัะธัะธัะตัะบะธ ะฒะฐะถะฝะพะณะพ ะฟะพะบะฐะทะฐัะตะปั ะฒ ะบะฐัะดะธะพะปะพะณะธะธ

- **ะคะธะฝะฐะปัะฝัะต ะผะตััะธะบะธ ะฝะฐ ะฒะฐะปะธะดะฐัะธะธ**  
  - **Recall (ะบะปะฐัั 1 - ะฒััะพะบะธะน ัะธัะบ): 0.947**  
    - ะะพะดะตะปั ะฝะฐัะพะดะธั **95% ะฟะฐัะธะตะฝัะพะฒ ะธะท ะณััะฟะฟั ะฒััะพะบะพะณะพ ัะธัะบะฐ**  
  - **F1-score (ะบะปะฐัั 1): 0.528**  
    - ะะฟัะธะผะฐะปัะฝัะน ะฑะฐะปะฐะฝั ะผะตะถะดั ััะฒััะฒะธัะตะปัะฝะพัััั ะธ ัะพัะฝะพัััั ะฟัะธ ัะตะบััะตะผ ะดะธัะฑะฐะปะฐะฝัะต ะบะปะฐััะพะฒ

- **ะญะบัะฟะพัั production-ะฟะฐะนะฟะปะฐะนะฝะฐ**  
  ะะพะปะฝะพัััั ะฒะพัะฟัะพะธะทะฒะพะดะธะผัะน ะฟะฐะนะฟะปะฐะนะฝ: ะผะตะดะธะฐะฝะฝัะน ะธะผัััะธะฝะณ + CatBoost-ะผะพะดะตะปั + ัะฟะธัะพะบ ะฟัะธะทะฝะฐะบะพะฒ + ะพะฟัะธะผะฐะปัะฝัะน ะฟะพัะพะณ

- **FastAPI-ัะตัะฒะธั ะดะปั ะธะฝัะตะณัะฐัะธะธ**  
  ะัะพััะพะน ัะฝะดะฟะพะธะฝั `/predict` ะฟัะธะฝะธะผะฐะตั CSV-ัะฐะนะป ะธ ะฒะพะทะฒัะฐัะฐะตั ััััะบัััะธัะพะฒะฐะฝะฝัะต ะฟัะตะดัะบะฐะทะฐะฝะธั

- **ะกะพะฒะผะตััะธะผะพััั**  
  ะคะพัะผะฐั ะฒััะพะดะฝัั ะดะฐะฝะฝัั ะฟะพะปะฝะพัััั ัะพะฒะผะตััะธะผ ั ัะตััะพะฒัะผ ัะบัะธะฟัะพะผ `test.py`


## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```bash
ะฟัะพะตะบั/
โโโ app.py                         # FastAPI-ัะตัะฒะตั ั ัะฝะดะฟะพะธะฝัะฐะผะธ /predict ะธ /health
โโโ static/
โ   โโโ index.html                 # ะงะตะปะพะฒะตะบะพ-ะพัะธะตะฝัะธัะพะฒะฐะฝะฝัะน ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะทะฐะณััะทะบะธ ะธ ะฐะฝะฐะปะธะทะฐ
โโโ models/                        # Production-ะฐััะตัะฐะบัั ะผะพะดะตะปะธ
โ   โโโ heart_risk_model.cbm       # ะะธะฝะฐัะฝะฐั ะผะพะดะตะปั CatBoost
โ   โโโ model_features.json        # ะกะฟะธัะพะบ 15 ะธัะฟะพะปัะทัะตะผัั ะฟัะธะทะฝะฐะบะพะฒ
โ   โโโ preprocessing_config.json  # ะะพะฝัะธะณััะฐัะธั ะฟัะตะฟัะพัะตััะธะฝะณะฐ
โ   โโโ optimal_threshold.json     # ะะฟัะธะผะฐะปัะฝัะน ะฟะพัะพะณ (0.42)
โโโ src/                           # ะััะพะดะฝัะน ะบะพะด ะผะพะดัะปะตะน
โ   โโโ preprocessing/
โ       โโโ data_preprocessor.py   # ะะพะณะธะบะฐ ะพัะธััะบะธ ะธ ะฟะพะดะณะพัะพะฒะบะธ ะดะฐะฝะฝัั
โโโ requirements.txt               # ะะฐะฒะธัะธะผะพััะธ ะดะปั pip
โโโ environment.yml                # ะะฐะฒะธัะธะผะพััะธ ะดะปั Conda
โโโ README.md                      # ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
```


> ๐ก **ะญัะธัะตัะบะธะน ะฟัะธะฝัะธะฟ**: ะะพะดะตะปั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ **ะฝะต ะดะปั ะฟะพััะฐะฝะพะฒะบะธ ะดะธะฐะณะฝะพะทะฐ**, ะฐ ะดะปั ะฒััะฒะปะตะฝะธั ะฟะฐัะธะตะฝัะพะฒ, ััะตะฑัััะธั **ััะพัะฝะพะน ะบะพะฝััะปััะฐัะธะธ ะฒัะฐัะฐ**



## ๐ ะะฐะบ ะทะฐะฟัััะธัั ะฟัะพะตะบั

### 1. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ

ะัะพะตะบั ะฟะพะดะดะตัะถะธะฒะฐะตั ะดะฒะฐ ัะฟะพัะพะฑะฐ ัััะฐะฝะพะฒะบะธ ะทะฐะฒะธัะธะผะพััะตะน - ัะตัะตะท `pip` ะธะปะธ `conda`.

#### ะะฐัะธะฐะฝั A: ัะตัะตะท pip (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะกะพะทะดะฐะนัะต ะธ ะฐะบัะธะฒะธััะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
python -m venv .venv
source .venv/bin/activate        # Linux/macOS
# ะะะ
.venv\Scripts\activate          # Windows

# ะะฑะฝะพะฒะธัะต pip ะธ ัััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
pip install --upgrade pip
pip install -r requirements.txt
```

#### ะะฐัะธะฐะฝั B: ัะตัะตะท conda

```bash
# ะกะพะทะดะฐะนัะต ะพะบััะถะตะฝะธะต ะธะท environment.yml
conda env create -f environment.yml

# ะะบัะธะฒะธััะนัะต ะพะบััะถะตะฝะธะต
conda activate heart_risk_api
```


### 2. ะะพะดะณะพัะพะฒััะต ะผะพะดะตะปั

ะฃะฑะตะดะธัะตัั, ััะพ ะฟะฐะฟะบะฐ `models/` ัะพะดะตัะถะธั ัะปะตะดัััะธะต ัะฐะนะปั:

- `heart_risk_model.cbm` - ะพะฑััะตะฝะฝะฐั ะผะพะดะตะปั CatBoost  
- `model_features.json` - ัะฟะธัะพะบ ะฟัะธะทะฝะฐะบะพะฒ, ะธัะฟะพะปัะทัะตะผัั ะผะพะดะตะปัั  
- `optimal_threshold.json` - ะฟะพัะพะณ ะบะปะฐััะธัะธะบะฐัะธะธ (ะฝะฐะฟัะธะผะตั, `{"threshold": 0.42}`)  
- `preprocessing_config.json` - ะบะพะฝัะธะณััะฐัะธั ะฟัะตะฟัะพัะตััะพัะฐ (ะธัะฟะพะปัะทัะตััั ะฒ `src/preprocessing/data_preprocessor.py`)

> โ๏ธ ะัะปะธ ััะธั ัะฐะนะปะพะฒ ะฝะตั, ัะฝะฐัะฐะปะฐ ะฒัะฟะพะปะฝะธัะต ะพะฑััะตะฝะธะต ะผะพะดะตะปะธ ะฒ `risk_of_heart_attack.ipynb` ะธ ัะพััะฐะฝะธัะต ะฐััะตัะฐะบัั ะฒ ะฟะฐะฟะบั `models/`
> 

### 3. ะะฐะฟัััะธัะต ัะตัะฒะตั

```bash
python app.py
```

ะะพัะปะต ะทะฐะฟััะบะฐ ะฒั ัะฒะธะดะธัะต ะธะฝัะพัะผะฐัะธั ะฒัะพะดะต:

```bash
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ CardioRisk Prediction System
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะฐะณััะถะตะฝะพ ะฟัะธะทะฝะฐะบะพะฒ : 15
โ๏ธ ะะพัะพะณ ะบะปะฐััะธัะธะบะฐัะธะธ : 0.42
๐ค ะะพะดะตะปั ะทะฐะณััะถะตะฝะฐ    : ะะฐ
๐ ะัะตะฟัะพัะตััะพั        : ะะฐ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะตะฑ-ะธะฝัะตััะตะนั       : http://localhost:8000
๐ ะะพะบัะผะตะฝัะฐัะธั API    : http://localhost:8000/api/docs
๐ ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั  : http://localhost:8000/api/health
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

![FastAPI ัะตัะฒะตั](./docs/screenshots/010.png)


### 4. ะัะฟะพะปัะทัะนัะต ะฟัะธะปะพะถะตะฝะธะต

#### ๐ฅ๏ธ ะะตะฑ-ะธะฝัะตััะตะนั (ัะตะบะพะผะตะฝะดัะตะผัะน ัะฟะพัะพะฑ ะดะปั ัะตััะธัะพะฒะฐะฝะธั)

1. ะัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต: [http://localhost:8000](http://localhost:8000)
2. ะะฐะถะผะธัะต **ยซะัะฑัะฐัั ัะฐะนะปยป** ะธ ะทะฐะณััะทะธัะต CSV-ัะฐะนะป ั ะดะฐะฝะฝัะผะธ ะฟะฐัะธะตะฝัะพะฒ (ะพะฑัะทะฐัะตะปัะฝะพ ะดะพะปะถะฝะฐ ะฑััั ะบะพะปะพะฝะบะฐ `id`)
3. ะะฐะถะผะธัะต **ยซะะฝะฐะปะธะทะธัะพะฒะฐััยป**
4. ะะตะทัะปััะฐัั ะพัะพะฑัะฐะทัััั ะฒ ัะฐะฑะปะธัะต. ะั ะผะพะถะตัะต:
   - ะคะธะปัััะพะฒะฐัั ะฟะพ ััะพะฒะฝั ัะธัะบะฐ
   - ะัะบะฐัั ะฟะพ ID ะฟะฐัะธะตะฝัะฐ
   - ะกะบะฐัะฐัั ัะตะทัะปััะฐัั ะฒ ัะพัะผะฐัะต CSV

#### ๐ก API

- **POST `/predict`** - ะทะฐะณััะทะธัะต CSV-ัะฐะนะป ะธ ะฟะพะปััะธัะต JSON ั ะดะตัะฐะปะธะทะธัะพะฒะฐะฝะฝัะผะธ ะฟัะตะดัะบะฐะทะฐะฝะธัะผะธ (ะฒะตัะพััะฝะพััั, ััะพะฒะตะฝั ัะธัะบะฐ, ัะตะบะพะผะตะฝะดะฐัะธะธ)
- **POST `/predict/csv`** - ะทะฐะณััะทะธัะต CSV-ัะฐะนะป ะธ ะฟะพะปััะธัะต ะพัะฒะตั ะฒ ัะพัะผะฐัะต `submission.csv` (ัะพะปัะบะพ `id` ะธ `prediction`)
- **GET `/api/health`** - ะฟัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ ัะตัะฒะธัะฐ

ะัะธะผะตั ะฒัะทะพะฒะฐ ัะตัะตะท `curl`:

```bash
curl -X POST "http://localhost:8000/predict/csv" \
  -H "accept: text/csv" \
  -F "file=@datasets/heart_test.csv" \
  -o submission.**csv**
```


## ะกะบัะธะฝัะพัั ะฟัะธะปะพะถะตะฝะธั

![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/001.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/002.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/003.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/004.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/005.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/006.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/007.jpg)
![ะะฝัะตััะตะนั ะฟัะธะปะพะถะตะฝะธั](./docs/screenshots/008.jpg)
![ะัััั ะพะฑ ะฐะฝะฐะปะธะทะต ัะตัะดะตัะฝะพะณะพ ัะธัะบะฐ](./docs/screenshots/009.jpg)




